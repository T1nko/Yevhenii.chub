<!DOCTYPE html>
<html>
  <head>
    <title>Work 2</title>
    <meta charset="utf-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      .box {
        width: 300px;
        height: 100px;
        background: lightgreen;
      }

      .hide {
        display: none;
      }

      .show {
        display: block;
      }
    </style>
    <script src="js/script.js"></script>
  </head>

  <body>
    <div class="container">
      <h2>Home Work 2</h2>
      <div class="box hide"></div>
      <div id="showtime">00d 00h:00m:00s</div>
      <button id="start" class="btn btn-primary">START</button>
    </div>

    <!--  
 1. Написати скрипт який через 1 хвилину після натискання на кнопку
 Start  відкриє на новій вкладці браузера сторінку 
     http://google.com
 Відлік зворотного часу показувати елемент з id="showtime"

 
 Щоб скрипт можна було використовувати у різних частинах коду,
 його треба зробити універсальним.
 Тобто зробити так, щоб можна було змінювати інтервал часу зворотного
 відліку, а також дію, що виконується.

 2. Провести перевірку скрипта на правильність
 - задати інтервал 4 діб 1 хвилину
 - задати інтервал 4 діб 1 годину 1 хвилину
- задати іншу дію - відкриття hidden блок із класом .box
-->

    <script>
      /*
    const showtime = document.getElementById("showtime");
    const btn = document.getElementById("start");
    const box = document.querySelector(".box");

    const norm = (v) => (v < 10 ? "0" + v : v);

    let delay = 86400 * 4 + 10;
    delay = 5;

    function doAction() {
      box.style.display = "block"
    }
    function remain() { }

    btn.onclick = function () { };
*/

      const showtime = document.getElementById("showtime");
      const btn = document.getElementById("start");
      const box = document.querySelector(".box");

      const norm = (v) => (v < 10 ? "0" + v : v);
      let delay = 86400 * 4 + 10;
      //delay = 5;
      let countdown;

      function formatTime(seconds) {
        const dd = Math.floor(seconds / 86400);
        const hh = Math.floor((seconds % 86400) / 3600);
        const mm = Math.floor((seconds % 3600) / 60);
        const ss = seconds % 60;

        return `${norm(dd)}d ${norm(hh)}h:${norm(mm)}m:${norm(ss)}s`;
      }

      function doAction() {
        box.style.display = "block";
      }

      function countdownFunction() {
        if (delay <= 0) {
          clearInterval(countdown);
          doAction();
        } else {
          delay--;
          showtime.innerHTML = formatTime(delay);
        }
      }

      btn.onclick = function () {
        if (!countdown) {
          countdown = setInterval(countdownFunction, 1000);
        }
      };
    </script>
  </body>
</html>
