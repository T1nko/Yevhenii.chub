<!doctype html>
<html>

<head>
    <title>animate opacity</title>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        .el {
            height: 220px;
            background: green;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row mt-5">
            <div class="col-sm-6">
                <div id="el" class="el" style="opacity:1"></div>
            </div>
            <div class="col-sm-4">
                <input class="btn btn-primary" type="button" id="btn" value="FadeOut">
                <div id="result" class="mt-3 h3">Result</div>
            </div>
        </div><!-- /.row-->
    </div><!-- /.container-->

    <script>
        const el = document.getElementById('el')
        const btn = document.getElementById('btn')
        const res = document.getElementById('result')
        let hdn;
        let flag = true;

        function changeOpacity() {
            let op = parseFloat(el.style.opacity);
            op = flag ? (op -= 0.02) : (op += 0.02);

            res.textContent = op.toFixed(2);
            if (op <= 0 || op >= 1) {
                clearInterval(hdn)
                btn.removeAttribute('disabled')
                flag = !flag;
                btn.value = flag ? "Fade out" : "Fade in"
                setTimeout(() => {
                    res.textContent = ''
                }, 3000)
            }
            el.style.opacity = op;
        }

        btn.onclick = function () {
            this.setAttribute('disabled', true)
            hdn = setInterval(changeOpacity, 40)
        }

    </script>
</body>

</html>