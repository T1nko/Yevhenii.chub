<!DOCTYPE html>
<html>
  <head>
    <title>Lab 1_2</title>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="../_/css/style.css" />
  </head>
  <body>
    <div class="container">
      <h2 class="text-center py-3">Lab 1_2</h2>
      <div class="row">
        <div class="col-sm-6 offset-3">
          <table id="calculator-box">
            <tr>
              <td colspan="4" id="result"></td>
            </tr>
            <tr>
              <td><a href="#">1</a></td>
              <td><a href="#">2</a></td>
              <td><a href="#">3</a></td>
              <td><a href="#">+</a></td>
            </tr>
            <tr>
              <td><a href="#">4</a></td>
              <td><a href="#">5</a></td>
              <td><a href="#">6</a></td>
              <td><a href="#">-</a></td>
            </tr>
            <tr>
              <td><a href="#">7</a></td>
              <td><a href="#">8</a></td>
              <td><a href="#">9</a></td>
              <td><a href="#">*</a></td>
            </tr>
            <tr>
              <td class="clear"><a href="#">Clear</a></td>
              <td><a href="#">0</a></td>
              <td><a href="#">=</a></td>
              <td><a href="#">/</a></td>
            </tr>
          </table>
        </div>
      </div>

      <script>
 /* Задача слушателям - провести рефакторинг кода
   -  для итерации по элементам использовать итератор forEach   
   -  назначение событий реализовать методом addEventListener()  
 */ 
      
const res = document.getElementById('result')
const els = document.querySelectorAll('#calculator-box a');

function addDigitHandler(val) {
  return function(){
    return addDigit(val);
  }
}

function addDigit(val) {
  res.innerHTML += val;
  return false;
}
function reset(){
  res.innerHTML = '';
  return false;
}
function calculate(){
  res.innerHTML  = eval(res.innerHTML);
  return false;
}

els.forEach(el => {
    let innerVal = el.innerHTML;
    switch(innerVal) {
        case 'Clear':
            el.onclick = reset;
            break;
        case '=':
            el.onclick = calculate;
            break;
        default:
            el.onclick = addDigitHandler(innerVal);
    }
});

</script>
    </div>
  </body>
</html>
